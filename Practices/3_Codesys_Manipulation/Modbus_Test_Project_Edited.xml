<?xml version="1.0" encoding="utf-8"?>
<project xmlns="http://www.plcopen.org/xml/tc6_0200">
  <fileHeader companyName="" productName="CODESYS" productVersion="CODESYS V3.5 SP20 Patch 5" creationDateTime="2025-07-04T16:22:35.3439176" />
  <contentHeader name="Modbus_Test_Project_Abingdon_Virtual.project" modificationDateTime="2025-07-04T16:22:08.6346008">
    <coordinateInfo>
      <fbd>
        <scaling x="1" y="1" />
      </fbd>
      <ld>
        <scaling x="1" y="1" />
      </ld>
      <sfc>
        <scaling x="1" y="1" />
      </sfc>
    </coordinateInfo>
    <addData>
      <data name="http://www.3s-software.com/plcopenxml/projectinformation" handleUnknown="implementation">
        <ProjectInformation />
      </data>
    </addData>
  </contentHeader>
  <types>
    <dataTypes />
    <pous />
  </types>
  <instances>
    <configurations>
      <configuration name="EDWARDS_ARM_Cortex">
        <resource name="Application">
          <task name="Task" interval="PT0.1S" priority="1">
            <pouInstance name="Main" typeName="">
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml" />
              </documentation>
            </pouInstance>
            <addData>
              <data name="http://www.3s-software.com/plcopenxml/tasksettings" handleUnknown="implementation">
                <TaskSettings KindOfTask="Cyclic" Interval="t#100ms" IntervalUnit="ms" WithinSPSTimeSlicing="true">
                  <Watchdog Enabled="false" TimeUnit="ms" Sensitivity="1" />
                </TaskSettings>
              </data>
              <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
                <ObjectId>3618c329-bbe4-4990-907f-b65a987d64e9</ObjectId>
              </data>
            </addData>
          </task>
          <addData>
            <data name="http://www.3s-software.com/plcopenxml/datatype" handleUnknown="implementation">
              <dataType name="StructModbusDataforTCPServer">
                <baseType>
                  <struct>
                    <variable name="aReadCoils">
                      <type>
                        <array>
                          <dimension lower="1" upper="100" />
                          <baseType>
                            <BYTE />
                          </baseType>
                        </array>
                      </type>
                    </variable>
                    <variable name="aWriteCoils">
                      <type>
                        <array>
                          <dimension lower="1" upper="100" />
                          <baseType>
                            <BYTE />
                          </baseType>
                        </array>
                      </type>
                    </variable>
                    <variable name="aReadDiscreteInputs">
                      <type>
                        <array>
                          <dimension lower="1" upper="100" />
                          <baseType>
                            <BYTE />
                          </baseType>
                        </array>
                      </type>
                    </variable>
                    <variable name="aWriteDiscreteInputs">
                      <type>
                        <array>
                          <dimension lower="1" upper="100" />
                          <baseType>
                            <BYTE />
                          </baseType>
                        </array>
                      </type>
                    </variable>
                    <variable name="aReadHoldingRegisters">
                      <type>
                        <array>
                          <dimension lower="1" upper="100" />
                          <baseType>
                            <INT />
                          </baseType>
                        </array>
                      </type>
                    </variable>
                    <variable name="aWriteHoldingRegisters">
                      <type>
                        <array>
                          <dimension lower="1" upper="100" />
                          <baseType>
                            <INT />
                          </baseType>
                        </array>
                      </type>
                    </variable>
                    <variable name="aReadInputRegisters">
                      <type>
                        <array>
                          <dimension lower="1" upper="100" />
                          <baseType>
                            <INT />
                          </baseType>
                        </array>
                      </type>
                    </variable>
                    <variable name="aWriteInputRegisters">
                      <type>
                        <array>
                          <dimension lower="1" upper="100" />
                          <baseType>
                            <INT />
                          </baseType>
                        </array>
                      </type>
                    </variable>
                  </struct>
                </baseType>
                <addData>
                  <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
                    <ObjectId>990eb277-6ed5-45f2-980f-c98d90a1b0bf</ObjectId>
                  </data>
                </addData>
              </dataType>
            </data>
            <data name="http://www.3s-software.com/plcopenxml/pou" handleUnknown="implementation">
              <pou name="Main" pouType="program">
                <interface>
                  <localVars>
                    <variable name="nCounter">
                      <type>
                        <INT />
                      </type>
                    </variable>
                    <variable name="bInit">
                      <type>
                        <BOOL />
                      </type>
                      <initialValue>
                        <simpleValue value="FALSE" />
                      </initialValue>
                    </variable>
                    <variable name="ModbusTcpServer">
                      <type>
                        <derived name="CmpModbusTcpServer.ModbusServer" />
                      </type>
                      <documentation>
                        <xhtml xmlns="http://www.w3.org/1999/xhtml">Modbus Tcp Server</xhtml>
                      </documentation>
                    </variable>
                    <variable name="ModbusTcpServerDevice">
                      <type>
                        <derived name="CmpModbusTcpServer.ModbusServerDevice" />
                      </type>
                    </variable>
                    <variable name="stModbusTcpServerData">
                      <type>
                        <derived name="StructModbusDataForTCPServer" />
                      </type>
                    </variable>
                    <variable name="stModbusTcpServerStatus">
                      <type>
                        <derived name="CmpModbusTcpServer.Status" />
                      </type>
                    </variable>
                    <variable name="strModataData">
                      <type>
                        <derived name="StructModbusDataforTCPServer" />
                      </type>
                    </variable>
                  </localVars>
                </interface>
                <body>
                  <ST>
                    <xhtml xmlns="http://www.w3.org/1999/xhtml">nCounter := nCounter + 1;

IF bInit = FALSE THEN
	bInit := TRUE;
	ModbusTcpServerDevice.Initialize(usiUnitId := 1);

	ModbusTcpServer.Initialize(
		pbyIpAddress:=ADR('192.168.3.102'), 
		uiPort:= 1100);

	ModbusTcpServer.Open();
END_IF

ModbusTcpServerDevice.ReadCoils(
	uiStartAddress:=0,
	uiReadLength:=10,
	pbyBuffer:= ADR(strModataData.aReadCoils), 
	uiBufferSize:=10);

ModbusTcpServerDevice.WriteCoils(
	uiStartAddress:=100,
	uiWriteLength:=10,
	pbyBuffer:= ADR(strModataData.aWriteCoils), 
	uiBufferSize:=10);

ModbusTcpServerDevice.ReadDiscreteInputs(
	uiStartAddress:=0,
	uiReadLength:=10, 
	pbyBuffer:= ADR(strModataData.aReadDiscreteInputs), 
	uiBufferSize:=10);

ModbusTcpServerDevice.WriteDiscreteInputs(
	uiStartAddress:=100,
	uiWriteLength:=10,
	pbyBuffer:= ADR(strModataData.aWriteDiscreteInputs), 
	uiBufferSize:=10);

ModbusTcpServerDevice.ReadHoldingRegisters(
	uiStartAddress:=0, 
	uiReadLength:=10, 
	pwBuffer:= ADR(strModataData.aReadHoldingRegisters), 
	uiBufferSize:=20);
	
ModbusTcpServerDevice.WriteHoldingRegisters(
	uiStartAddress:=100, 
	uiWriteLength:=10,
	pwBuffer:= ADR(strModataData.aWriteHoldingRegisters), 
	uiBufferSize:=20);

ModbusTcpServerDevice.ReadInputRegisters(
	uiStartAddress:=0, 
	uiReadLength:=10,
	pwBuffer:= ADR(strModataData.aReadInputRegisters), 
	uiBufferSize:=20);

ModbusTcpServerDevice.WriteInputRegisters(
	uiStartAddress:=100, 
	uiWriteLength:=10,
	pwBuffer:= ADR(strModataData.aWriteInputRegisters), 
	uiBufferSize:=20);

ModbusTcpServer.GetStatus(
	pStatus:=ADR(stModbusTcpServerStatus));</xhtml>
                  </ST>
                </body>
                <addData>
                  <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
                    <ObjectId>afeb0f8f-78b6-4fd8-9ced-e22f4cf30a75</ObjectId>
                  </data>
                </addData>
              </pou>
            </data>
            <data name="http://www.3s-software.com/plcopenxml/libraries" handleUnknown="implementation">
              <Libraries>
                <Library Name="#IoStandard" Namespace="IoStandard" HideWhenReferencedAsDependency="false" PublishSymbolsInContainer="false" SystemLibrary="true" LinkAllContent="true" DefaultResolution="IoStandard, 3.5.17.0 (System)" />
                <Library Name="#3SLicense" Namespace="_3S_LICENSE" HideWhenReferencedAsDependency="false" PublishSymbolsInContainer="false" SystemLibrary="true" LinkAllContent="false" DefaultResolution="3SLicense, 0.0.0.0 (CODESYS)" ResolverGuid="97c3b452-d9fa-4ac2-9d0c-3d420aa6d95b" />
                <Library Name="#CAA Device Diagnosis" Namespace="DED" HideWhenReferencedAsDependency="false" PublishSymbolsInContainer="false" SystemLibrary="true" LinkAllContent="false" DefaultResolution="CAA Device Diagnosis, 3.5.21.0 (CAA Technical Workgroup)" />
                <Library Name="#BreakpointLogging" Namespace="BPLog" HideWhenReferencedAsDependency="false" PublishSymbolsInContainer="false" SystemLibrary="true" LinkAllContent="false" DefaultResolution="Breakpoint Logging Functions, * (3S - Smart Software Solutions GmbH)" />
                <Library Name="#VirtualModbusTcpServer" Namespace="VirtualModbusTcpServer" HideWhenReferencedAsDependency="false" PublishSymbolsInContainer="false" SystemLibrary="false" LinkAllContent="false" DefaultResolution="VirtualModbusTcpServer, * (Edwards)" />
                <PlaceholderRedirections>
                  <PlaceholderRedirection Placeholder="Standard" Redirection="Standard, 3.5.18.0 (System)" />
                  <PlaceholderRedirection Placeholder="CmpEventMgr Implementation" Redirection="CmpEventMgr Implementation, 3.5.17.0 (System)" />
                  <PlaceholderRedirection Placeholder="CmpModbusTcpServer" Redirection="CmpModbusTcpServer, 1.1.0.0 (Edwards Vacuum)" />
                  <PlaceholderRedirection Placeholder="VirtualModbusTcpServer" Redirection="VirtualModbusTcpServer, 1.0.0 (Edwards)" />
                  <PlaceholderRedirection Placeholder="ModbusFB" Redirection="ModbusFB, 4.4.0.0 (CODESYS)" />
                  <PlaceholderRedirection Placeholder="StringUtils" Redirection="StringUtils, 3.5.20.0 (System)" />
                </PlaceholderRedirections>
                <addData>
                  <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
                    <ObjectId>975b2998-2a37-4707-b6b6-5ee627875b12</ObjectId>
                  </data>
                </addData>
              </Libraries>
            </data>
            <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
              <ObjectId>7227f003-ef10-494e-9668-fc3ead53772d</ObjectId>
            </data>
          </addData>
        </resource>
        <addData>
          <data name="Device" handleUnknown="discard">
            <Device xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="">
              <DeviceType>
                <DeviceIdentification>
                  <Type>4096</Type>
                  <Id>0000 1007</Id>
                  <Version>4.16.0.0</Version>
                </DeviceIdentification>
                <Connector moduleType="256" interface="Common.PCI" connectorId="0">
                  <HostParameterSet />
                </Connector>
                <Connector moduleType="1280" interface="GPIOSysfs" connectorId="1">
                  <HostParameterSet />
                </Connector>
                <DeviceParameterSet />
              </DeviceType>
            </Device>
          </data>
          <data name="configurations" handleUnknown="discard">
            <configurations />
          </data>
          <data name="http://www.3s-software.com/plcopenxml/objectid" handleUnknown="discard">
            <ObjectId>048a9784-64ae-4351-bbb4-7cdf9b3acb90</ObjectId>
          </data>
        </addData>
      </configuration>
    </configurations>
  </instances>
  <addData>
    <data name="http://www.3s-software.com/plcopenxml/projectstructure" handleUnknown="discard">
      <ProjectStructure>
        <Object Name="EDWARDS_ARM_Cortex" ObjectId="048a9784-64ae-4351-bbb4-7cdf9b3acb90">
          <Object Name="Application" ObjectId="7227f003-ef10-494e-9668-fc3ead53772d">
            <Object Name="Library Manager" ObjectId="975b2998-2a37-4707-b6b6-5ee627875b12" />
            <Object Name="Task" ObjectId="3618c329-bbe4-4990-907f-b65a987d64e9" />
            <Object Name="StructModbusDataforTCPServer" ObjectId="990eb277-6ed5-45f2-980f-c98d90a1b0bf" />
            <Object Name="Main" ObjectId="afeb0f8f-78b6-4fd8-9ced-e22f4cf30a75" />
          </Object>
        </Object>
      </ProjectStructure>
    </data>
  </addData>
</project>